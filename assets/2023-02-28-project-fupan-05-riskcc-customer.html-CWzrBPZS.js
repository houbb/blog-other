import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as t,o as r}from"./app-CEDSurVN.js";const n={};function o(s,p){return r(),a("div",null,p[0]||(p[0]=[t('<h1 id="客诉" tabindex="-1"><a class="header-anchor" href="#客诉"><span>客诉</span></a></h1><h2 id="背景" tabindex="-1"><a class="header-anchor" href="#背景"><span>背景</span></a></h2><p>客户可能会提起投诉。</p><p>以前都是通过邮件 + EXCEL的方式，不利于分析与流转。</p><h2 id="整体功能" tabindex="-1"><a class="header-anchor" href="#整体功能"><span>整体功能</span></a></h2><p>内控上传工单</p><p>1）首先进行工单的信息校验，判断是否合法，是否重复等等，把校验不通过的返回给页面。</p><p>PS：这个步骤是比较漫长的，不要让用户同步等待，而是后端异步处理。最后让运营可以再内控文件下载中心查看。</p><p>2）后端程序调用商户+服务商服务，把数据全部填充完成。状态初始化为 I</p><p>3）内控可以看到所有的工单，可以对工单进行审核/或者修改。</p><p>4）外控服务商，可以看到自己名下的单子。所有的流转日志，处理对应的工单信息，上传对应的材料等信息。</p><p>工单可能存在超时等。</p><hr><h2 id="页面嵌套方式" tabindex="-1"><a class="header-anchor" href="#页面嵌套方式"><span>页面嵌套方式</span></a></h2><p>这个页面是内嵌在已经的控台中的页面。</p><p>内嵌的方式有多种：</p><p>1）直接 iframe 内嵌，这个存在一定的缓存。虽然简单，但是不利于拓展。</p><p>2）基于乾坤这种微服务。</p><p>开始是基于 iframe 内嵌的，后续改成了基于基于乾坤的。</p><blockquote><p><a href="https://houbb.github.io/2021/11/02/qiankun-01-overview" target="_blank" rel="noopener noreferrer">qiankun-01-微前端框架介绍</a></p></blockquote><h2 id="鉴权流程" tabindex="-1"><a class="header-anchor" href="#鉴权流程"><span>鉴权流程</span></a></h2><p>页面进入时，首先获取内嵌容器中的 token，然后携带给后端。进行初次的鉴权。</p><p>1）第一次鉴权比较慢，需要获取对应的菜单权限等信息。并返回新的 newToken</p><p>为了前端好处理，把按钮权限进行了一些摊平，简化。</p><p>2）后续其他请求，携带的是 newToken。</p><p>newToken 一个作用是校验合法性，另一个是因为登录等功能不在我这边。</p><p>所以需要每次验证一下 newToken 对应的信息是否有效。如果无效，则报错。</p><p>提示用户重新登录。</p><h2 id="一些收获" tabindex="-1"><a class="header-anchor" href="#一些收获"><span>一些收获</span></a></h2><p>【需求层面】</p><p>不紧急的需求：</p><p>（1）页面的误操作校验</p><p>xx号：只能输入数字/字母</p><p>xx名：只能输入中文</p><p>时间不多时，不应该接</p><p>（2）框架层面</p><p>要求滚动条固定等，需要修改前端框架才可能实现的，不接受。</p><p>原因：</p><p>ROI 太低，把时间浪费在无关紧要的地方，会导致精力分散，无法专注于实现功能。</p><p>【需求变更+实现】</p><p>需求在实现过程中，经常会发生变更。</p><p>后端接口也是类似的。</p><p>（1）要注意和产品确认最新的文档。产品修改通知开发+测试;<br> （2）让界面符合产品的要求/审美，比如输入框显的很高，缺少分隔线等</p><p>上线前测试环境让产品先过一遍。</p><p>【需求测试】</p><p>问：为什么会犯这么低级的错误？如页面少了一个字段。</p><p>原因：</p><p>（1）需求文档和项目原型不一致，修改需求时前端+测试不知道。<br> （2）测试时间较短，未能全面覆盖。</p><p>【技术的优缺点】</p><p>页面内嵌，让后端鉴权+前端页面变得都比以前复杂。</p><p>乾坤和IFRAME都有优缺点（坑），不过微服务是方向。</p><p>【底层依赖的问题】</p><p>（1）API 网关存在BUG<br> （2）流水线故障，无法发布<br> （3）HOC 发布存在 BUG<br> （4）HOLMES测试覆盖率存在问题</p><hr><h1 id="协查" tabindex="-1"><a class="header-anchor" href="#协查"><span>协查</span></a></h1><h2 id="说明" tabindex="-1"><a class="header-anchor" href="#说明"><span>说明</span></a></h2><p>整体流程和客诉很类似。</p><p>唯一的差异比较大的地方，就是文件比较复杂，全部是动态的。</p><p>不同的类别，需要不同的文件提供证明信息。</p><p>所以全部设计为后端动态返回。</p><h2 id="复盘" tabindex="-1"><a class="header-anchor" href="#复盘"><span>复盘</span></a></h2><h3 id="文件上传问题" tabindex="-1"><a class="header-anchor" href="#文件上传问题"><span>文件上传问题</span></a></h3><p>视频等文件，要求 30M</p><p>超过 10MB 的文件，jboss 会报错。询问配管，没人遇到过，说明以前没有超过 10MB 的文件实际上传需求。</p><p>耗时问题。针对外控的多个上传文件，内控/风控要求统一的压缩包。</p><p>10MB + 10MB + 20MB = 40MB</p><p>会导致压缩包很大，上传很慢。</p><p>较大的文件，导致文件解析的耗时。</p><p>用户体验很差，所以调整为异步。</p><h3 id="联调时间约定" tabindex="-1"><a class="header-anchor" href="#联调时间约定"><span>联调时间约定</span></a></h3><p>商户信息：后端 + 商户前置</p><p>后端与风控：jar 包提供的较晚。</p><p>需要约定好联调日期，接口提供日期。</p><p>约定好联调开始+结束日期。</p><h2 id="页面样式" tabindex="-1"><a class="header-anchor" href="#页面样式"><span>页面样式</span></a></h2><p>尽可能保证页面风格和已有的系统保持一致。</p><h1 id="拓展阅读" tabindex="-1"><a class="header-anchor" href="#拓展阅读"><span>拓展阅读</span></a></h1><p><a href="https://github.com/houbb/checksum" target="_blank" rel="noopener noreferrer">https://github.com/houbb/checksum</a></p>',78)]))}const i=e(n,[["render",o]]),d=JSON.parse('{"path":"/posts/Project/2023-02-28-project-fupan-05-riskcc-customer.html","title":"项目复盘梳理-04-客诉流程 工单状态流转 页面内嵌","lang":"zh-CN","frontmatter":{"title":"项目复盘梳理-04-客诉流程 工单状态流转 页面内嵌","date":"2023-02-13T00:00:00.000Z","categories":["Project"],"tags":["in-actions","project","sh"],"published":false,"description":"客诉 背景 客户可能会提起投诉。 以前都是通过邮件 + EXCEL的方式，不利于分析与流转。 整体功能 内控上传工单 1）首先进行工单的信息校验，判断是否合法，是否重复等等，把校验不通过的返回给页面。 PS：这个步骤是比较漫长的，不要让用户同步等待，而是后端异步处理。最后让运营可以再内控文件下载中心查看。 2）后端程序调用商户+服务商服务，把数据全部填...","head":[["meta",{"property":"og:url","content":"https://houbb.github.io/blog-other/posts/Project/2023-02-28-project-fupan-05-riskcc-customer.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"项目复盘梳理-04-客诉流程 工单状态流转 页面内嵌"}],["meta",{"property":"og:description","content":"客诉 背景 客户可能会提起投诉。 以前都是通过邮件 + EXCEL的方式，不利于分析与流转。 整体功能 内控上传工单 1）首先进行工单的信息校验，判断是否合法，是否重复等等，把校验不通过的返回给页面。 PS：这个步骤是比较漫长的，不要让用户同步等待，而是后端异步处理。最后让运营可以再内控文件下载中心查看。 2）后端程序调用商户+服务商服务，把数据全部填..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-22T03:45:14.000Z"}],["meta",{"property":"article:tag","content":"in-actions"}],["meta",{"property":"article:tag","content":"project"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:published_time","content":"2023-02-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-22T03:45:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"项目复盘梳理-04-客诉流程 工单状态流转 页面内嵌\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-02-13T00:00:00.000Z\\",\\"dateModified\\":\\"2025-08-22T03:45:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"]]},"git":{"createdTime":1755834314000,"updatedTime":1755834314000,"contributors":[{"name":"binbin.hou","username":"","email":"binbin.hou@huifu.com","commits":1}]},"readingTime":{"minutes":3.9,"words":1171},"filePathRelative":"posts/Project/2023-02-28-project-fupan-05-riskcc-customer.md","localizedDate":"2023年2月13日","excerpt":"\\n<h2>背景</h2>\\n<p>客户可能会提起投诉。</p>\\n<p>以前都是通过邮件 + EXCEL的方式，不利于分析与流转。</p>\\n<h2>整体功能</h2>\\n<p>内控上传工单</p>\\n<p>1）首先进行工单的信息校验，判断是否合法，是否重复等等，把校验不通过的返回给页面。</p>\\n<p>PS：这个步骤是比较漫长的，不要让用户同步等待，而是后端异步处理。最后让运营可以再内控文件下载中心查看。</p>\\n<p>2）后端程序调用商户+服务商服务，把数据全部填充完成。状态初始化为 I</p>\\n<p>3）内控可以看到所有的工单，可以对工单进行审核/或者修改。</p>\\n<p>4）外控服务商，可以看到自己名下的单子。所有的流转日志，处理对应的工单信息，上传对应的材料等信息。</p>","autoDesc":true}');export{i as comp,d as data};
