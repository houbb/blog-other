import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,a as n,o as r}from"./app-CEDSurVN.js";const p={};function o(i,a){return r(),t("div",null,a[0]||(a[0]=[n('<h1 id="背景" tabindex="-1"><a class="header-anchor" href="#背景"><span>背景</span></a></h1><p>我们可以考虑设计一套 SQL 指标。</p><p>不过SQL指标个人感觉设计的比较好的就是类似于 grafana 这种，可以内置支持常见的数据源最好。</p><h2 id="拓展阅读" tabindex="-1"><a class="header-anchor" href="#拓展阅读"><span>拓展阅读</span></a></h2><p><a href="https://houbb.github.io/2021/06/20/apm-grafana-stack-grafana-01-overview" target="_blank" rel="noopener noreferrer">grafana stack grafana-01-The open and composable observability and data visualization platform.</a></p><h1 id="整体思路" tabindex="-1"><a class="header-anchor" href="#整体思路"><span>整体思路</span></a></h1><h2 id="核心能力" tabindex="-1"><a class="header-anchor" href="#核心能力"><span>核心能力</span></a></h2><p>基础指标信息的管理。</p><p>我们开始可以实现最基础的 jdbc 类型的数据库支持。</p><h2 id="是一套语法-还是方言支持" tabindex="-1"><a class="header-anchor" href="#是一套语法-还是方言支持"><span>是一套语法，还是方言支持？</span></a></h2><p>最开始其实想通过一套标准的 SQL 语法，实现常见的数据源支持。</p><p>比如 <a href="https://houbb.github.io/2024/01/10/database-apache-calcite-doc-overview-01-intro" target="_blank" rel="noopener noreferrer">Apache Calcite</a></p><p>这种大一统的理念其实挺好的，不过实际还是会发现，不同的 SQL 方言差别太大，这种想通过一种标准，来解决统一问题，兼容效果其实比较差。</p><p>最后还是考虑使用具体的方言，这样比较灵活一些。</p><h2 id="更多类型的支持" tabindex="-1"><a class="header-anchor" href="#更多类型的支持"><span>更多类型的支持</span></a></h2><p>后续可以根据用户的需求，引入新的数据源支持：</p><p>mysql/oracle/sql server</p><p>redis/memcache</p><p>es</p><p>mongodb</p><p>时序数据库 vm</p><h1 id="cmdb-是一切的基石" tabindex="-1"><a class="header-anchor" href="#cmdb-是一切的基石"><span>cmdb 是一切的基石</span></a></h1><p>当然，数据源有两种维护方式，一种是让用户手动配置。</p><p>另一种是将应用所有关联的数据源信息，全部放到 cmdb 中管理。</p><p>当然，这其实是一个非常难得事情。</p><p>需要长久地维护，而且必须保证数据的正确性。</p><h2 id="权限" tabindex="-1"><a class="header-anchor" href="#权限"><span>权限</span></a></h2><p>方便按照应用等，控制数据源的权限。</p><h3 id="便捷" tabindex="-1"><a class="header-anchor" href="#便捷"><span>便捷</span></a></h3><p>用户选择应用后，可以联动出对应的数据库信息。</p><h1 id="一些设计细节" tabindex="-1"><a class="header-anchor" href="#一些设计细节"><span>一些设计细节</span></a></h1><h2 id="偏移量" tabindex="-1"><a class="header-anchor" href="#偏移量"><span>偏移量</span></a></h2><p>执行的时候，允许指定对应的偏移量。</p><p>方便用户比如今天执行昨天的数据</p><h2 id="下次调度的时间" tabindex="-1"><a class="header-anchor" href="#下次调度的时间"><span>下次调度的时间</span></a></h2><p>让用户可以自己选择。</p><h1 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span>小结</span></a></h1><p>这种要结合自身的业务，其实 jdbc 可以解决大部分的问题。</p><p>另外的可以结合多种数据源一起来解决，比如 CAT / 日志 / 普米 / ZABBIX 等等。</p><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1><p>无</p>',41)]))}const c=e(p,[["render",o]]),d=JSON.parse('{"path":"/posts/devops/2019-04-01-monitor-in-action-04-sql-indicator.html","title":"监控系统实战-04-SQL 指标的数据源","lang":"zh-CN","frontmatter":{"title":"监控系统实战-04-SQL 指标的数据源","date":"2018-11-25T00:00:00.000Z","categories":["Devops"],"tags":["devops","monitor","apm","zabbix","sh"],"published":true,"description":"背景 我们可以考虑设计一套 SQL 指标。 不过SQL指标个人感觉设计的比较好的就是类似于 grafana 这种，可以内置支持常见的数据源最好。 拓展阅读 grafana stack grafana-01-The open and composable observability and data visualization platform. 整体思...","head":[["meta",{"property":"og:url","content":"https://houbb.github.io/blog-other/posts/devops/2019-04-01-monitor-in-action-04-sql-indicator.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"监控系统实战-04-SQL 指标的数据源"}],["meta",{"property":"og:description","content":"背景 我们可以考虑设计一套 SQL 指标。 不过SQL指标个人感觉设计的比较好的就是类似于 grafana 这种，可以内置支持常见的数据源最好。 拓展阅读 grafana stack grafana-01-The open and composable observability and data visualization platform. 整体思..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-22T03:45:14.000Z"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"monitor"}],["meta",{"property":"article:tag","content":"apm"}],["meta",{"property":"article:tag","content":"zabbix"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:published_time","content":"2018-11-25T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-22T03:45:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"监控系统实战-04-SQL 指标的数据源\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2018-11-25T00:00:00.000Z\\",\\"dateModified\\":\\"2025-08-22T03:45:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"]]},"git":{"createdTime":1755834314000,"updatedTime":1755834314000,"contributors":[{"name":"binbin.hou","username":"","email":"binbin.hou@huifu.com","commits":1}]},"readingTime":{"minutes":1.83,"words":550},"filePathRelative":"posts/devops/2019-04-01-monitor-in-action-04-sql-indicator.md","localizedDate":"2018年11月25日","excerpt":"\\n<p>我们可以考虑设计一套 SQL 指标。</p>\\n<p>不过SQL指标个人感觉设计的比较好的就是类似于 grafana 这种，可以内置支持常见的数据源最好。</p>\\n<h2>拓展阅读</h2>\\n<p><a href=\\"https://houbb.github.io/2021/06/20/apm-grafana-stack-grafana-01-overview\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">grafana stack grafana-01-The open and composable observability and data visualization platform.</a></p>","autoDesc":true}');export{c as comp,d as data};
