import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as e}from"./app-uJE4P3e0.js";const l={};function t(p,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="序言" tabindex="-1"><a class="header-anchor" href="#序言"><span>序言</span></a></h1><p>结合 ai 打造 rca 系统，先让 ai 回答一下。</p><h1 id="chat" tabindex="-1"><a class="header-anchor" href="#chat"><span>chat</span></a></h1><h2 id="从-noc-开始-如何一步步推断出根因-最终的分析报告-包含推断过程-打分机制-给出整体的流程-要求尽可能的闭环-反馈修正-提升准确率" tabindex="-1"><a class="header-anchor" href="#从-noc-开始-如何一步步推断出根因-最终的分析报告-包含推断过程-打分机制-给出整体的流程-要求尽可能的闭环-反馈修正-提升准确率"><span>从 NOC 开始，如何一步步推断出根因+最终的分析报告（包含推断过程+打分机制），给出整体的流程，要求尽可能的闭环+反馈修正+提升准确率</span></a></h2><p>非常好，这是在构建<strong>AIOps根因分析系统</strong>时最核心的一环：从 <strong>NOC 一线告警接收</strong>开始，<strong>逐步推理 → 定位根因 → 输出解释型分析报告 → 人工反馈修正 → 模型持续学习提升准确率</strong>。</p><p>我会结合你的背景，给出一套<strong>实战可落地的完整闭环流程（Pipeline）</strong>，包括数据路径、推理链、打分机制与学习反馈。</p><hr><h2 id="🧭-总览-从-noc-到-root-cause-分析报告的闭环流程" tabindex="-1"><a class="header-anchor" href="#🧭-总览-从-noc-到-root-cause-分析报告的闭环流程"><span>🧭 总览：从 NOC 到 Root Cause 分析报告的闭环流程</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>┌────────────┐</span></span>
<span class="line"><span>│  NOC 接收告警  │  ← Prometheus, Zabbix, etc.</span></span>
<span class="line"><span>└────┬───────┘</span></span>
<span class="line"><span>     ↓</span></span>
<span class="line"><span>┌────────────┐</span></span>
<span class="line"><span>│  告警事件建模 │  ← 统一字段：host, service, ts, severity, etc.</span></span>
<span class="line"><span>└────┬───────┘</span></span>
<span class="line"><span>     ↓</span></span>
<span class="line"><span>┌────────────┐</span></span>
<span class="line"><span>│  多模态数据拉取 │  ← 日志 / 指标 / Trace / 配置 / CMDB</span></span>
<span class="line"><span>└────┬───────┘</span></span>
<span class="line"><span>     ↓</span></span>
<span class="line"><span>┌────────────┐</span></span>
<span class="line"><span>│  分析任务调度器 │  ← 触发 Root Cause 分析流程</span></span>
<span class="line"><span>└────┬───────┘</span></span>
<span class="line"><span>     ↓</span></span>
<span class="line"><span>┌──────────────────────────────────────────┐</span></span>
<span class="line"><span>│          AI根因分析引擎（主流程）           │</span></span>
<span class="line"><span>│   1. 事件聚合 → 2. 依赖图推理 →             │</span></span>
<span class="line"><span>│   3. 日志/指标/Trace分析 → 4. COT+RAG推理    │</span></span>
<span class="line"><span>│   5. 打分机制 → 6. 报告生成                  │</span></span>
<span class="line"><span>└──────────────────────────────────────────┘</span></span>
<span class="line"><span>     ↓</span></span>
<span class="line"><span>┌────────────┐</span></span>
<span class="line"><span>│  结果展示与推理链 │ ← 呈现给 NOC / SRE 人员</span></span>
<span class="line"><span>└────┬───────┘</span></span>
<span class="line"><span>     ↓</span></span>
<span class="line"><span>┌────────────┐</span></span>
<span class="line"><span>│  人工确认 + 反馈  │ ← 正确 / 错误 + 标注根因</span></span>
<span class="line"><span>└────┬───────┘</span></span>
<span class="line"><span>     ↓</span></span>
<span class="line"><span>┌────────────┐</span></span>
<span class="line"><span>│  学习反馈机制   │ ← Fine-tune / RAG补充 / 强化提示</span></span>
<span class="line"><span>└────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="🧱-每个阶段详细说明-工程策略" tabindex="-1"><a class="header-anchor" href="#🧱-每个阶段详细说明-工程策略"><span>🧱 每个阶段详细说明 + 工程策略</span></a></h2><hr><h3 id="🟩-1-noc-接收到告警" tabindex="-1"><a class="header-anchor" href="#🟩-1-noc-接收到告警"><span>🟩 1. NOC 接收到告警</span></a></h3><p>来源：</p><ul><li>Prometheus / Zabbix / Nagios / 云监控平台</li><li>通常是阈值告警或组合条件告警</li></ul><p>行动：</p><ul><li>标准化告警格式，归一成事件模型：</li></ul><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;timestamp&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;2025-08-07T09:00:00&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;host&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;svc-a01&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;service&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;order-service&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;severity&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;critical&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;message&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;99th percentile latency &gt; 1.5s&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="🟩-2-多模态数据拉取-特征构建" tabindex="-1"><a class="header-anchor" href="#🟩-2-多模态数据拉取-特征构建"><span>🟩 2. 多模态数据拉取（特征构建）</span></a></h3><p>根据告警关联：</p><ul><li><strong>拉日志</strong>（Loki / ELK / SLS）：过去5-10分钟日志</li><li><strong>拉指标</strong>（PromQL）：CPU、内存、QPS、错误率、延迟</li><li><strong>拉Trace</strong>（Jaeger / Skywalking）：找慢链路/失败Span</li><li><strong>查拓扑</strong>（CMDB / 调用图 / 容器调度信息）</li></ul><p>归一后构造成“事件上下文包”：</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;metrics&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">&quot;latency&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1500</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">&quot;error_rate&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.15</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;logs&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;...connection timeout...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;...retrying...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ],</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;trace&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;order -&gt; payment -&gt; mysql&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;spanC: 2s delay&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ],</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;dependencies&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;order -&gt; payment&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;payment -&gt; mysql&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ],</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;env&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">&quot;k8s_node&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;node-12&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">&quot;pod&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;payment-v1-xyz&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="🟩-3-root-cause-分析主流程-ai引擎" tabindex="-1"><a class="header-anchor" href="#🟩-3-root-cause-分析主流程-ai引擎"><span>🟩 3. Root Cause 分析主流程（AI引擎）</span></a></h3><h4 id="✅-step-1-事件聚合-降噪" tabindex="-1"><a class="header-anchor" href="#✅-step-1-事件聚合-降噪"><span>✅ Step 1. 事件聚合 &amp; 降噪</span></a></h4><ul><li>时间窗合并（Sliding window 聚类）</li><li>相似报警折叠（规则 + 语义相似度）</li><li>聚合为「一次故障事件」：ID + 多报警 + 多特征</li></ul><h4 id="✅-step-2-拓扑图分析-依赖传播链" tabindex="-1"><a class="header-anchor" href="#✅-step-2-拓扑图分析-依赖传播链"><span>✅ Step 2. 拓扑图分析（依赖传播链）</span></a></h4><ul><li>构建调用依赖图（如：A → B → C）</li><li>延迟/错误传播方向分析（如链路中哪个节点异常点最多）</li><li>“告警传播图”剪枝，定位 root candidate（根因候选）</li></ul><h4 id="✅-step-3-日志-指标-trace-推理" tabindex="-1"><a class="header-anchor" href="#✅-step-3-日志-指标-trace-推理"><span>✅ Step 3. 日志 / 指标 / Trace 推理</span></a></h4><ul><li><p>日志异常识别：</p><ul><li>Drain 模板识别 + 异常评分</li><li>日志Embedding + KMeans/SVM识别异常段落</li></ul></li><li><p>指标变化趋势分析：</p><ul><li>使用 z-score / seasonality / AutoEncoder 异常检测</li></ul></li><li><p>Trace 分析：</p><ul><li>找出最慢的Span + 关联上下游影响链路</li></ul></li></ul><h4 id="✅-step-4-llm-推理链-cot-rag" tabindex="-1"><a class="header-anchor" href="#✅-step-4-llm-推理链-cot-rag"><span>✅ Step 4. LLM 推理链（COT + RAG）</span></a></h4><ul><li>构造 prompt（COT）：</li></ul><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>你是一个SRE专家，现在系统收到了如下报警信息与相关上下文：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[告警]</span></span>
<span class="line"><span>- order-service 延迟升高 &gt; 1500ms</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[依赖]</span></span>
<span class="line"><span>- order → payment → mysql</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[指标]</span></span>
<span class="line"><span>- payment-service CPU: 正常</span></span>
<span class="line"><span>- mysql error_rate: 20%</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[日志]</span></span>
<span class="line"><span>- payment-service 出现错误：connect mysql timeout</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请逐步分析以上内容，找出可能的根因，并说明推理过程。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>支持 RAG：从知识库召回“数据库连接失败案例”对比</li><li>输出结构化结果（如下）</li></ul><hr><h3 id="🟩-4-输出分析报告-打分机制" tabindex="-1"><a class="header-anchor" href="#🟩-4-输出分析报告-打分机制"><span>🟩 4. 输出分析报告 + 打分机制</span></a></h3><p>最终结果输出格式建议如下：</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;root_cause&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;mysql连接异常&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;score&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.91</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;evidence&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;payment-service 日志中出现 connect mysql timeout&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;mysql 错误率上升到 20%&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;Trace显示调用延迟集中在 mysql span 上&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ],</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;root_node&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;mysql&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;confidence&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;log&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.95</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;metrics&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.85</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;trace&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.93</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;topology&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.88</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;suggestion&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;检查数据库连接池配置 / 网络连通性&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;reasoning_path&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;order 延迟 → payment 正常 → mysql 异常 → 日志确认&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;最终判断根因在 mysql&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>呈现在系统中，供 NOC / SRE 评估与确认。</p><hr><h3 id="🟩-5-人工确认-反馈修正" tabindex="-1"><a class="header-anchor" href="#🟩-5-人工确认-反馈修正"><span>🟩 5. 人工确认 + 反馈修正</span></a></h3><ul><li>提供「是否正确」按钮，或允许选择“真实根因”</li><li>将结果 + 人工确认打包进训练数据集</li><li>支持上传更多证据、修正日志匹配模板、归类问题类型</li></ul><hr><h3 id="🟩-6-学习反馈闭环" tabindex="-1"><a class="header-anchor" href="#🟩-6-学习反馈闭环"><span>🟩 6. 学习反馈闭环</span></a></h3><table><thead><tr><th>类型</th><th>方法</th></tr></thead><tbody><tr><td>RAG 知识增强</td><td>增加更多典型案例文档 → 向量入库</td></tr><tr><td>提示优化</td><td>基于反馈自动微调提示模板</td></tr><tr><td>模型增强</td><td>对 LLM 进行轻量 fine-tune（如 QLoRA）</td></tr><tr><td>规则调整</td><td>基于反馈调整图推理权重、指标阈值</td></tr><tr><td>新异常模式学习</td><td>基于聚类结果标注新类型日志，增强模板识别</td></tr></tbody></table><hr><h2 id="🧠-打分机制说明-置信度评分" tabindex="-1"><a class="header-anchor" href="#🧠-打分机制说明-置信度评分"><span>🧠 打分机制说明（置信度评分）</span></a></h2><p>每一类数据源都可以独立评估其“支持根因”的强度：</p><table><thead><tr><th>数据源</th><th>分数策略</th></tr></thead><tbody><tr><td>日志</td><td>异常模板匹配率 + 异常关键词相似度</td></tr><tr><td>指标</td><td>是否显著变化 + 是否出现在 root node</td></tr><tr><td>Trace</td><td>异常 span 的 delay 占比</td></tr><tr><td>拓扑</td><td>是否为叶子节点 + 上游正常下游异常</td></tr></tbody></table><p>最终打分为加权平均或加权树结构输出：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>final_score = 0.3 * log_score + 0.3 * metric_score + 0.2 * trace_score + 0.2 * topo_score</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="📌-总结-从-noc-到-ai-报告的闭环五步法" tabindex="-1"><a class="header-anchor" href="#📌-总结-从-noc-到-ai-报告的闭环五步法"><span>📌 总结：从 NOC 到 AI 报告的闭环五步法</span></a></h2><table><thead><tr><th>步骤</th><th>动作</th></tr></thead><tbody><tr><td>1️⃣ 告警归一建模</td><td>结构化、标准化多源告警</td></tr><tr><td>2️⃣ 多模态数据融合</td><td>拉取日志、指标、Trace、拓扑</td></tr><tr><td>3️⃣ AI根因分析</td><td>图推理 + 多模态分析 + COT 推理</td></tr><tr><td>4️⃣ 分析报告输出</td><td>包含推理链条 + 信心分数 + 建议</td></tr><tr><td>5️⃣ 人工反馈闭环</td><td>修正 &amp; 增量学习 &amp; 模型增强</td></tr></tbody></table><hr><h2 id="📣-如果你希望我继续深入" tabindex="-1"><a class="header-anchor" href="#📣-如果你希望我继续深入"><span>📣 如果你希望我继续深入：</span></a></h2><ul><li>🎯 帮你写一个完整的 COT Prompt 模板</li><li>🧪 演示一个样例数据的推理链全过程</li><li>🛠️ 构建 RAG 的知识库方案</li><li>🔄 设计反馈系统与模型增量学习机制</li></ul><p>可以继续告诉我你关注哪一部分，我来逐步帮你推进落地。</p><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1>`,61)]))}const d=i(l,[["render",t]]),c=JSON.parse('{"path":"/posts/Note/2025-04-19-note-rca-12-ai-chat-noc-flow.html","title":"RCA 根因分析推断-12-从 NOC 开始，如何一步步推断出根因+最终的分析报告（包含推断过程+打分机制）","lang":"zh-CN","frontmatter":{"title":"RCA 根因分析推断-12-从 NOC 开始，如何一步步推断出根因+最终的分析报告（包含推断过程+打分机制）","date":"2025-04-19T00:00:00.000Z","categories":["Note"],"tags":["note","rca","ai","devops","alarm","sh"],"published":true,"description":"序言 结合 ai 打造 rca 系统，先让 ai 回答一下。 chat 从 NOC 开始，如何一步步推断出根因+最终的分析报告（包含推断过程+打分机制），给出整体的流程，要求尽可能的闭环+反馈修正+提升准确率 非常好，这是在构建AIOps根因分析系统时最核心的一环：从 NOC 一线告警接收开始，逐步推理 → 定位根因 → 输出解释型分析报告 → 人工反...","head":[["meta",{"property":"og:url","content":"https://houbb.github.io/blog-backend/posts/Note/2025-04-19-note-rca-12-ai-chat-noc-flow.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"RCA 根因分析推断-12-从 NOC 开始，如何一步步推断出根因+最终的分析报告（包含推断过程+打分机制）"}],["meta",{"property":"og:description","content":"序言 结合 ai 打造 rca 系统，先让 ai 回答一下。 chat 从 NOC 开始，如何一步步推断出根因+最终的分析报告（包含推断过程+打分机制），给出整体的流程，要求尽可能的闭环+反馈修正+提升准确率 非常好，这是在构建AIOps根因分析系统时最核心的一环：从 NOC 一线告警接收开始，逐步推理 → 定位根因 → 输出解释型分析报告 → 人工反..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-22T03:45:14.000Z"}],["meta",{"property":"article:tag","content":"note"}],["meta",{"property":"article:tag","content":"rca"}],["meta",{"property":"article:tag","content":"ai"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"alarm"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:published_time","content":"2025-04-19T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-22T03:45:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"RCA 根因分析推断-12-从 NOC 开始，如何一步步推断出根因+最终的分析报告（包含推断过程+打分机制）\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-04-19T00:00:00.000Z\\",\\"dateModified\\":\\"2025-08-22T03:45:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"]]},"git":{"createdTime":1755834314000,"updatedTime":1755834314000,"contributors":[{"name":"binbin.hou","username":"","email":"binbin.hou@huifu.com","commits":1}]},"readingTime":{"minutes":5.11,"words":1534},"filePathRelative":"posts/Note/2025-04-19-note-rca-12-ai-chat-noc-flow.md","localizedDate":"2025年4月19日","excerpt":"\\n<p>结合 ai 打造 rca 系统，先让 ai 回答一下。</p>\\n<h1>chat</h1>\\n<h2>从 NOC 开始，如何一步步推断出根因+最终的分析报告（包含推断过程+打分机制），给出整体的流程，要求尽可能的闭环+反馈修正+提升准确率</h2>\\n<p>非常好，这是在构建<strong>AIOps根因分析系统</strong>时最核心的一环：从 <strong>NOC 一线告警接收</strong>开始，<strong>逐步推理 → 定位根因 → 输出解释型分析报告 → 人工反馈修正 → 模型持续学习提升准确率</strong>。</p>\\n<p>我会结合你的背景，给出一套<strong>实战可落地的完整闭环流程（Pipeline）</strong>，包括数据路径、推理链、打分机制与学习反馈。</p>","autoDesc":true}');export{d as comp,c as data};
