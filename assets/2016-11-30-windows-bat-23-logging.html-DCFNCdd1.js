import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as t}from"./app-CEDSurVN.js";const n={};function h(l,i){return t(),a("div",null,i[0]||(i[0]=[e(`<h1 id="日志" tabindex="-1"><a class="header-anchor" href="#日志"><span>日志</span></a></h1><p>在批处理脚本中，可以使用重定向命令来记录日志。</p><h2 id="语法" tabindex="-1"><a class="header-anchor" href="#语法"><span>语法</span></a></h2><div class="language-batch line-numbers-mode" data-highlighter="shiki" data-ext="batch" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">test.bat &gt; testlog.txt </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; testerrors.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span>示例</span></a></h2><p>创建一个名为 test.bat 的文件，并在文件中输入以下命令。</p><div class="language-batch line-numbers-mode" data-highlighter="shiki" data-ext="batch" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">net</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> statistics /Server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>上述命令存在错误，因为 net statistics 命令的选项使用错误的方式给出了。</p><h2 id="输出" tabindex="-1"><a class="header-anchor" href="#输出"><span>输出</span></a></h2><p>如果使用上述 test.bat 文件运行以下命令：</p><div class="language-batch line-numbers-mode" data-highlighter="shiki" data-ext="batch" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">test.bat &gt; testlog.txt </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; testerrors.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后打开 testerrors.txt 文件，你将看到以下错误信息：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>The option /SERVER is unknown.</span></span>
<span class="line"><span>The syntax of this command is −</span></span>
<span class="line"><span></span></span>
<span class="line"><span>NET STATISTICS</span></span>
<span class="line"><span>[WORKSTATION | SERVER]</span></span>
<span class="line"><span>More help is available by typing NET HELPMSG 3506.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你打开名为 testlog.txt 的文件，它将显示执行了哪些命令的日志。</p><div class="language-batch line-numbers-mode" data-highlighter="shiki" data-ext="batch" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">C:\\tp&gt;net statistics /Server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="chat" tabindex="-1"><a class="header-anchor" href="#chat"><span>chat</span></a></h1><h2 id="详细介绍一下-bat-脚本中的日志" tabindex="-1"><a class="header-anchor" href="#详细介绍一下-bat-脚本中的日志"><span>详细介绍一下 bat 脚本中的日志</span></a></h2><p>在批处理（Batch）脚本中，日志记录是一项重要的实践，它可以帮助开发者和系统管理员追踪脚本的行为、调试问题以及审计操作。以下是在批处理脚本中创建和使用日志文件的一些方法和技巧：</p><h3 id="_1-使用-echo-命令写入日志" tabindex="-1"><a class="header-anchor" href="#_1-使用-echo-命令写入日志"><span>1. 使用 <code>echo</code> 命令写入日志</span></a></h3><p>批处理中最基本和最常用的日志记录方法是使用 <code>echo</code> 命令将文本追加到日志文件中。</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">%date%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> %time%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] Script started. &gt;&gt; log.txt</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">%date%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> %time%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] An important event occurred. &gt;&gt; log.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-重定向输出到日志文件" tabindex="-1"><a class="header-anchor" href="#_2-重定向输出到日志文件"><span>2. 重定向输出到日志文件</span></a></h3><p>使用重定向运算符 <code>&gt;</code> 或 <code>&gt;&gt;</code> 可以将命令的输出直接写入日志文件，覆盖或追加内容。</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> C:\\importantfolder &gt; dir_output.txt</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">. &gt;&gt; dir_output.txt</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">%date%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> %time%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] Directory listing completed. &gt;&gt; dir_output.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-使用管道和-find-命令" tabindex="-1"><a class="header-anchor" href="#_3-使用管道和-find-命令"><span>3. 使用管道和 <code>find</code> 命令</span></a></h3><p>如果需要过滤日志输出，可以使用管道 <code>|</code> 将输出传递给 <code>find</code> 命令。</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">net user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Username&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; user_log.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-使用-type-命令显示日志内容" tabindex="-1"><a class="header-anchor" href="#_4-使用-type-命令显示日志内容"><span>4. 使用 <code>type</code> 命令显示日志内容</span></a></h3><p>可以在脚本中使用 <code>type</code> 命令来显示日志文件的内容。</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> log.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-日志文件的路径和名称" tabindex="-1"><a class="header-anchor" href="#_5-日志文件的路径和名称"><span>5. 日志文件的路径和名称</span></a></h3><p>日志文件可以放在任何可访问的位置，并且可以根据需要设置文件名，以便于管理和搜索。</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Log entry. &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">SystemDrive</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\\logs\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">computername</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">_</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">:~</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-4</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">:~</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-7</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">:~</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-10</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.log&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-错误重定向" tabindex="-1"><a class="header-anchor" href="#_6-错误重定向"><span>6. 错误重定向</span></a></h3><p>使用 <code>2&gt;</code> 或 <code>&gt;&gt;</code> 将错误输出追加到日志文件中。</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">command </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt; error_log.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-结合-echo-和变量" tabindex="-1"><a class="header-anchor" href="#_7-结合-echo-和变量"><span>7. 结合 <code>echo</code> 和变量</span></a></h3><p>使用变量可以创建更灵活的日志记录格式。</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> log_message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">%date%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> %time%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] Task completed successfully.</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> %log_message%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; log.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-日志级别" tabindex="-1"><a class="header-anchor" href="#_8-日志级别"><span>8. 日志级别</span></a></h3><p>可以创建不同级别的日志记录，例如信息、警告、错误等。</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> info_message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">INFO: Task started.</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> error_message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ERROR: Task failed.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> %info_message%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; log.txt</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> errorlevel</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    echo</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> %error_message%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; error_log.txt</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-日志文件的维护" tabindex="-1"><a class="header-anchor" href="#_9-日志文件的维护"><span>9. 日志文件的维护</span></a></h3><p>定期清理或归档旧的日志文件，以避免它们占用过多磁盘空间。</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> exist</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> log.txt </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">:~</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-4</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">:~</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-7</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">:~</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-10</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> lss</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;2021-01-01&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    del</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> log.txt</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-使用第三方工具" tabindex="-1"><a class="header-anchor" href="#_10-使用第三方工具"><span>10. 使用第三方工具</span></a></h3><p>有些第三方批处理调试工具或日志记录库可以帮助创建更复杂和功能更丰富的日志系统。</p><h3 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h3><ul><li>使用 <code>%date%</code> 和 <code>%time%</code> 变量时，建议用双引号括起来，以确保在日期和时间之间可能存在的空格被正确处理。</li><li>日志文件应放置在具有适当权限的稳定位置，以防止未授权访问或数据丢失。</li><li>日志记录应平衡信息量和性能影响，过多的日志记录可能会拖慢脚本执行。</li></ul><p>通过这些方法，你可以在批处理脚本中实现有效的日志记录，从而更好地追踪脚本的行为和调试可能出现的问题。</p><h2 id="和-二者有什么区别" tabindex="-1"><a class="header-anchor" href="#和-二者有什么区别"><span>&gt; 和 &gt;&gt; 二者有什么区别？</span></a></h2><p>在批处理（Batch）文件中，<code>&gt;</code> 和 <code>&gt;&gt;</code> 是两个用于输出重定向的运算符，它们在功能上有所不同：</p><ol><li><p><code>&gt;</code>：大于符号用于将命令的输出重定向到一个文件中。如果指定的文件已经存在，使用 <code>&gt;</code> 运算符会截断（覆盖）该文件，即删除原有文件内容，然后写入新的输出。如果文件不存在，<code>&gt;</code> 运算符会创建一个新文件并写入输出。</p><p>示例：</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> This is the start of the file. &gt; output.txt</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> This line will not be included as the file has been truncated.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>&gt;&gt;</code>：双大于符号用于将命令的输出追加到一个已存在的文件末尾。如果文件不存在，<code>&gt;&gt;</code> 运算符会创建一个新文件。使用 <code>&gt;&gt;</code> 运算符不会覆盖现有文件内容，而是在文件末尾添加输出。</p><p>示例：</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> off</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> This line will be appended to the file. &gt;&gt; output.txt</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">echo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Another line appended to the file.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>在实际使用中，选择 <code>&gt;</code> 或 <code>&gt;&gt;</code> 取决于你是希望覆盖现有文件还是追加到现有文件。</p><p>通常，如果你想保留现有文件内容并在文件末尾添加更多内容，应该使用 <code>&gt;&gt;</code>。而如果你希望用新内容替换现有文件内容，或者当文件不存在时创建一个新文件，应该使用 <code>&gt;</code>。</p><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1><p><a href="https://www.tutorialspoint.com/batch_script/batch_script_logging.htm" target="_blank" rel="noopener noreferrer">https://www.tutorialspoint.com/batch_script/batch_script_logging.htm</a></p>`,57)]))}const p=s(n,[["render",h]]),r=JSON.parse('{"path":"/posts/windows/2016-11-30-windows-bat-23-logging.html","title":"windows bat 脚本教程-23-logging 日志","lang":"zh-CN","frontmatter":{"title":"windows bat 脚本教程-23-logging 日志","date":"2016-11-30T00:00:00.000Z","categories":["Windows"],"tags":["windows","shell","bat"],"published":true,"description":"日志 在批处理脚本中，可以使用重定向命令来记录日志。 语法 示例 创建一个名为 test.bat 的文件，并在文件中输入以下命令。 上述命令存在错误，因为 net statistics 命令的选项使用错误的方式给出了。 输出 如果使用上述 test.bat 文件运行以下命令： 然后打开 testerrors.txt 文件，你将看到以下错误信息： 如果你...","head":[["meta",{"property":"og:url","content":"https://houbb.github.io/blog-other/posts/windows/2016-11-30-windows-bat-23-logging.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"windows bat 脚本教程-23-logging 日志"}],["meta",{"property":"og:description","content":"日志 在批处理脚本中，可以使用重定向命令来记录日志。 语法 示例 创建一个名为 test.bat 的文件，并在文件中输入以下命令。 上述命令存在错误，因为 net statistics 命令的选项使用错误的方式给出了。 输出 如果使用上述 test.bat 文件运行以下命令： 然后打开 testerrors.txt 文件，你将看到以下错误信息： 如果你..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-22T03:45:14.000Z"}],["meta",{"property":"article:tag","content":"windows"}],["meta",{"property":"article:tag","content":"shell"}],["meta",{"property":"article:tag","content":"bat"}],["meta",{"property":"article:published_time","content":"2016-11-30T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-22T03:45:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"windows bat 脚本教程-23-logging 日志\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2016-11-30T00:00:00.000Z\\",\\"dateModified\\":\\"2025-08-22T03:45:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"]]},"git":{"createdTime":1755834314000,"updatedTime":1755834314000,"contributors":[{"name":"binbin.hou","username":"","email":"binbin.hou@huifu.com","commits":1}]},"readingTime":{"minutes":4.29,"words":1286},"filePathRelative":"posts/windows/2016-11-30-windows-bat-23-logging.md","localizedDate":"2016年11月30日","excerpt":"\\n<p>在批处理脚本中，可以使用重定向命令来记录日志。</p>\\n<h2>语法</h2>\\n<div class=\\"language-batch line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"batch\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">test.bat &gt; testlog.txt </span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">2</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">&gt; testerrors.txt</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{p as comp,r as data};
