import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a as t,o as n}from"./app-CEDSurVN.js";const r={};function o(s,p){return n(),e("div",null,p[0]||(p[0]=[t('<h1 id="对外接口" tabindex="-1"><a class="header-anchor" href="#对外接口"><span>对外接口</span></a></h1><p>类似于微信的开发者平台，一家公司要想做大做强，把自己的业务能力外放出去是必须的。</p><p>只有构建出自己强大的生态，才能永远屹立不倒。</p><h1 id="核心模块" tabindex="-1"><a class="header-anchor" href="#核心模块"><span>核心模块</span></a></h1><p>核心功能：</p><p>（1）请求类</p><p>用户可以主动查询，得到对应的结果。</p><p>（2）通知类</p><p>当一些事件发生的时候，通知用户。</p><p>（3）文件类</p><p>比如交易的对账文件。</p><p>一般是基于文件的形式，常见的方式有把文件放在对方 SFTP 服务器的。</p><p>其实比较好的方式，是让对方通过 appId/appSecret 自己去一个地方取，比如 OSS。</p><hr><h1 id="权限设计" tabindex="-1"><a class="header-anchor" href="#权限设计"><span>权限设计</span></a></h1><h2 id="请求类" tabindex="-1"><a class="header-anchor" href="#请求类"><span>请求类</span></a></h2><p>会首先验证用户的加密策略。</p><p>验证通过以后，解密对应的信息，然后处理响应。</p><p>返回给用户的时候，也会进行加密。</p><h2 id="通知类" tabindex="-1"><a class="header-anchor" href="#通知类"><span>通知类</span></a></h2><p>会把通知给用户的消息进行加密。</p><hr><p>以前是基于安全证书的，证书一般的下载验证流程比较麻烦，经常会有服务商搞不定。</p><p>所以在第二次设计改版的时候，推荐使用了 RSA 非对称加密。</p><p>公司的公钥可以控台下载，用户的公钥可以配置在控台之上。</p><p>这样接入的时候就会更加方便。</p><h1 id="权限审批流自动化" tabindex="-1"><a class="header-anchor" href="#权限审批流自动化"><span>权限审批流自动化</span></a></h1><p>最初的时候，都是每次销售+外部渠道沟通，然后申请对应的权限，邮件审批，最后开发手动刷库。</p><p>这个过程是一个非常麻烦，而且不利于统一管理的事情，大部分的事情都放在了研发这里。</p><h2 id="流程自动化" tabindex="-1"><a class="header-anchor" href="#流程自动化"><span>流程自动化</span></a></h2><p>得益于微信的强大能力。</p><p>公司内部引入了微信的审批流程，将每一个审核节点放在微信审批流中。</p><h2 id="接口设计" tabindex="-1"><a class="header-anchor" href="#接口设计"><span>接口设计</span></a></h2><p>把每一个产品支持的接口，按照接口类别，请求方式，等等配置好。</p><p>让用户申请生成一个审批流的单子，全部通过以后，然后将满足对应的接口放开。</p><p>其他的流程和以前一样。</p><h1 id="复盘问题" tabindex="-1"><a class="header-anchor" href="#复盘问题"><span>复盘问题</span></a></h1><h2 id="k8s-部署问题" tabindex="-1"><a class="header-anchor" href="#k8s-部署问题"><span>k8s 部署问题</span></a></h2><p>自身问题：不熟悉前端的 k8s 部署，配管也不熟悉。第一次接触 k8s</p><p>服务问题：k8s 初期，页面存在一些 BUG，文档错误等。</p><p>解决方案：参考其他前端的项目，和对应的开发沟通。@黑老师 @杨宇斌</p><h2 id="ldap-问题" tabindex="-1"><a class="header-anchor" href="#ldap-问题"><span>LDAP 问题</span></a></h2><p>内控需要登录，依赖 LDAP 服务。</p><p>问题：LDAP 缺少文档，没有 demo</p><p>解决：自己百度，找到用例测试验证。</p><h2 id="网关配置" tabindex="-1"><a class="header-anchor" href="#网关配置"><span>网关配置</span></a></h2><p>问题：k8s 强依赖网关配置，以前的集成环境配置有问题。</p><p>解决：和沟通确认网关，重新申请集成网关，并且通知收单的项目负责人。</p><p>CORS 跨域问题</p><p>问题：前后端分离，存在 CORS 跨域问题</p><p>解决：整理了 2 种解决方案，最后统一在网关进行配置。</p><h2 id="整体收获" tabindex="-1"><a class="header-anchor" href="#整体收获"><span>整体收获</span></a></h2><p>应用从立项到上线，共计耗时一周多点，带领新人体验了除 DevOps 阶段的其他全部，应用顺利上线并得到验证。</p><p>整个链路中涉及到的人员比较多，沟通相对比较耗时。</p><h1 id="拓展阅读" tabindex="-1"><a class="header-anchor" href="#拓展阅读"><span>拓展阅读</span></a></h1><p><a href="https://github.com/houbb/checksum" target="_blank" rel="noopener noreferrer">https://github.com/houbb/checksum</a></p>',56)]))}const c=a(r,[["render",o]]),d=JSON.parse('{"path":"/posts/Project/2023-02-28-project-fupan-04-out-api.html","title":"项目复盘梳理-04-对外接口+微信审批流","lang":"zh-CN","frontmatter":{"title":"项目复盘梳理-04-对外接口+微信审批流","date":"2023-02-13T00:00:00.000Z","categories":["Project"],"tags":["in-actions","project","data-migrate","sh"],"published":false,"description":"对外接口 类似于微信的开发者平台，一家公司要想做大做强，把自己的业务能力外放出去是必须的。 只有构建出自己强大的生态，才能永远屹立不倒。 核心模块 核心功能： （1）请求类 用户可以主动查询，得到对应的结果。 （2）通知类 当一些事件发生的时候，通知用户。 （3）文件类 比如交易的对账文件。 一般是基于文件的形式，常见的方式有把文件放在对方 SFTP ...","head":[["meta",{"property":"og:url","content":"https://houbb.github.io/blog-other/posts/Project/2023-02-28-project-fupan-04-out-api.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"项目复盘梳理-04-对外接口+微信审批流"}],["meta",{"property":"og:description","content":"对外接口 类似于微信的开发者平台，一家公司要想做大做强，把自己的业务能力外放出去是必须的。 只有构建出自己强大的生态，才能永远屹立不倒。 核心模块 核心功能： （1）请求类 用户可以主动查询，得到对应的结果。 （2）通知类 当一些事件发生的时候，通知用户。 （3）文件类 比如交易的对账文件。 一般是基于文件的形式，常见的方式有把文件放在对方 SFTP ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-22T03:45:14.000Z"}],["meta",{"property":"article:tag","content":"in-actions"}],["meta",{"property":"article:tag","content":"project"}],["meta",{"property":"article:tag","content":"data-migrate"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:published_time","content":"2023-02-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-22T03:45:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"项目复盘梳理-04-对外接口+微信审批流\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-02-13T00:00:00.000Z\\",\\"dateModified\\":\\"2025-08-22T03:45:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"]]},"git":{"createdTime":1755834314000,"updatedTime":1755834314000,"contributors":[{"name":"binbin.hou","username":"","email":"binbin.hou@huifu.com","commits":1}]},"readingTime":{"minutes":2.88,"words":865},"filePathRelative":"posts/Project/2023-02-28-project-fupan-04-out-api.md","localizedDate":"2023年2月13日","excerpt":"\\n<p>类似于微信的开发者平台，一家公司要想做大做强，把自己的业务能力外放出去是必须的。</p>\\n<p>只有构建出自己强大的生态，才能永远屹立不倒。</p>\\n<h1>核心模块</h1>\\n<p>核心功能：</p>\\n<p>（1）请求类</p>\\n<p>用户可以主动查询，得到对应的结果。</p>\\n<p>（2）通知类</p>\\n<p>当一些事件发生的时候，通知用户。</p>\\n<p>（3）文件类</p>\\n<p>比如交易的对账文件。</p>\\n<p>一般是基于文件的形式，常见的方式有把文件放在对方 SFTP 服务器的。</p>\\n<p>其实比较好的方式，是让对方通过 appId/appSecret 自己去一个地方取，比如 OSS。</p>","autoDesc":true}');export{c as comp,d as data};
