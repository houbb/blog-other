import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as s,o as i}from"./app-uJE4P3e0.js";const r={};function t(o,e){return i(),a("div",null,e[0]||(e[0]=[s(`<h1 id="rancher" tabindex="-1"><a class="header-anchor" href="#rancher"><span>Rancher</span></a></h1><p><a href="http://rancher.com/" target="_blank" rel="noopener noreferrer">Rancher</a> is an open source software platform that enables organizations to run containers in production.<br> With Rancher, organizations no longer have to build a container services platform from scratch using a distinct set of open source technologies.<br> Rancher supplies the entire software stack needed to manage containers in production.</p><p><a href="http://rancher.com/" target="_blank" rel="noopener noreferrer">Rancher</a> 是一个开放源代码软件平台，使组织可以在生产中运行容器。</p><p>使用Rancher，组织不再需要使用一套独特的开源技术从头开始构建容器服务平台。</p><p>Rancher提供了管理生产中的容器所需的整个软件堆栈。</p><h1 id="quick-start" tabindex="-1"><a class="header-anchor" href="#quick-start"><span>Quick Start</span></a></h1><pre><code>Env Prepare-&gt;Install:
Install-&gt;Show Log:
Show Log-&gt;Visit:
</code></pre><ul><li>Env Prepare</li></ul><p>Provision a Linux host with 64-bit Ubuntu 16.04, which must have a kernel of 3.10+. You can use your laptop, a virtual machine, or a physical server.<br> Please make sure the Linux host has at least <strong>1GB</strong> memory.</p><p>Install <a href="https://docs.docker.com" target="_blank" rel="noopener noreferrer">Docker</a> onto the host.</p><ul><li>Install Rancher</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo docker run -d --restart=unless-stopped -p 8080:8080 rancher/server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>it will download what it need, just wait...(<sup>_</sup>)</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Unable to find image &#39;rancher/server:latest&#39; locally</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>latest: Pulling from rancher/server</span></span>
<span class="line"><span></span></span>
<span class="line"><span>96c6a1f3c3b0: Pull complete</span></span>
<span class="line"><span>ed40d4bcb313: Pull complete</span></span>
<span class="line"><span>b171f9dbc13b: Pull complete</span></span>
<span class="line"><span>ccfc4df4fbba: Pull complete</span></span>
<span class="line"><span>9e4d5a1238bb: Downloading [====================&gt;                              ] 51.36 MB/126.7 MB</span></span>
<span class="line"><span>f986ba0d224d: Download complete</span></span>
<span class="line"><span>303d9649bb89: Download complete</span></span>
<span class="line"><span>56825bfb5bb7: Download complete</span></span>
<span class="line"><span>86a35696481e: Download complete</span></span>
<span class="line"><span>eb2848176ff4: Download complete</span></span>
<span class="line"><span>fabbcc718243: Download complete</span></span>
<span class="line"><span>35489637da84: Download complete</span></span>
<span class="line"><span>5c005e2df0e8: Download complete</span></span>
<span class="line"><span>64ba16c4c9f4: Downloading [============&gt;                                      ] 23.25 MB/93.9 MB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>many years later...</p><ul><li>Run the Server</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>houbinbindeMacBook-Pro:~ houbinbin$ sudo docker run -d --restart=unless-stopped -p 8080:8080 rancher/server</span></span>
<span class="line"><span>64c8c24bcd22622b309ee086e80f193c9923fbfef42c2245481f19aa3e3b2f08</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>see the log</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo docker logs -f 64c8c24bcd22622b309ee086e80f193c9923fbfef42c2245481f19aa3e3b2f08</span></span>
<span class="line"><span></span></span>
<span class="line"><span>14:53:53.707 [main] INFO  ConsoleStatus - [DONE ] [49188ms] Startup Succeeded, Listening on port 8081</span></span>
<span class="line"><span>time=&quot;2016-10-26T14:53:54Z&quot; level=info msg=&quot;Starting websocket proxy. Listening on [:8080], Proxying to cattle API at [localhost:8081], Monitoring parent pid [8]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Visit</li></ul><p>Enter <code>localhost:8080</code> in browser, and you may see</p><figure><img src="https://raw.githubusercontent.com/houbb/resource/master/img/rancher/2016-10-26-rancher-index.png" alt="rancher-index" tabindex="0" loading="lazy"><figcaption>rancher-index</figcaption></figure><ul><li>Get the IP of <code>rancher-server</code> container</li></ul><p>下文中 <code>\\</code> 转义符号，实际使用请替换掉。(这和 jekyll 模板冲突)</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>$   houbinbindeMacBook-Pro:~ houbinbin$ docker inspect --format &#39;\\{\\{ .NetworkSettings.IPAddress \\}\\}&#39; rancher-server</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    172.17.0.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ADD HOSTS</li></ul><p>Click <strong>Infrastructure</strong>, into <strong>Hosts</strong> page, click <strong>Add Host</strong></p><p>We will only be adding the Rancher server host itself. Click <strong>Save</strong>.<br> By default, the <strong>Custom</strong> option will be selected, which provides the Docker command to launch the Rancher agent container.<br> There will also be options for cloud providers, which Rancher uses Docker Machine to launch hosts.</p><figure><img src="https://raw.githubusercontent.com/houbb/resource/master/img/rancher/2016-10-26-rancher-add-hosts.png" alt="rancher-add-host" tabindex="0" loading="lazy"><figcaption>rancher-add-host</figcaption></figure><p>1、Add the IP of <code>rancher-server</code> container in <strong>Something else</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>http://172.17.0.2:8080</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2、Copy and run this:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo docker run -d --privileged -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/rancher:/var/lib/rancher rancher/agent:v1.0.2 http://localhost:8080/v1/scripts/F6FA7D73AD9CEDEFDFFC:1477494000000:sDaoXvLMo7ZYn9rEmf0CLplZ2iI</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>and it may like this:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Unable to find image &#39;rancher/agent:v1.0.2&#39; locally</span></span>
<span class="line"><span>v1.0.2: Pulling from rancher/agent</span></span>
<span class="line"><span>5a132a7e7af1: Downloading [============================================&gt;      ] 57.85 MB/65.69 MB</span></span>
<span class="line"><span>fd2731e4c50c: Download complete</span></span>
<span class="line"><span>28a2f68d1120: Download complete</span></span>
<span class="line"><span>a3ed95caeb02: Download complete</span></span>
<span class="line"><span>7fa4fac65171: Downloading [=&gt;                                                 ] 2.162 MB/97.48 MB</span></span>
<span class="line"><span>33de63de5fdb: Download complete</span></span>
<span class="line"><span>d00b3b942272: Download complete</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>many years later...</p><p>Error</p><p>In Mac, may get error like this:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Digest: sha256:b0b532d1e891534779d0eb1a01a5717ebfff9ac024db4412ead87d834ba92544</span></span>
<span class="line"><span>Status: Downloaded newer image for rancher/agent:v1.0.2</span></span>
<span class="line"><span>88e97942429d406bea7912ecf58f752c3c3e605c8bc1390bc169aaa17c498537</span></span>
<span class="line"><span>docker: Error response from daemon: Mounts denied:</span></span>
<span class="line"><span>The path /var/lib/rancher</span></span>
<span class="line"><span>is not shared from OS X and is not known to Docker.</span></span>
<span class="line"><span>You can configure shared paths from Docker -&gt; Preferences... -&gt; File Sharing.</span></span>
<span class="line"><span>See https://docs.docker.com/docker-for-mac/osxfs/#namespaces for more info.</span></span>
<span class="line"><span>...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Get <a href="https://docs.docker.com/docker-for-mac/osxfs/#namespaces" target="_blank" rel="noopener noreferrer">more</a> from here, we can change the the command like this in <a href="http://icyleaf.com/" target="_blank" rel="noopener noreferrer">Mac</a></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo docker run -d --privileged -v /var/run/docker.sock:/var/run/docker.sock -v /Users/houbinbin/docker/rancher/var/lib/rancher:/var/lib/rancher rancher/agent:v1.0.2 http://172.17.0.2:8080/v1/scripts/ABD244B661452F490C0E:1477533600000:fD9nnKGL4a15IGh9CDoM14ZLLo4</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3bdf3d044694c30923c7b492b1b19f7e0596aa7355bc4b6b04eac99d6c230956</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When you click <strong>Close</strong> on the Rancher UI, you will be directed back to the <strong>Infrastructure -&gt; Hosts</strong> view.<br> In a couple of minutes, the host will automatically appear.</p><p>It may like this:</p><figure><img src="https://raw.githubusercontent.com/houbb/resource/master/img/rancher/2016-10-27-rancher-first-host.png" alt="first-host" tabindex="0" loading="lazy"><figcaption>first-host</figcaption></figure><ul><li>Create a Container through UI</li></ul><p>1、Navigate to <strong>Stacks</strong>, click the <strong>Add Stack</strong>, provide a name and description. then, click <strong>Create</strong></p><p>2、Enter into one stack, click <strong>Add Service</strong>, provide a name and just use default to <strong>Create</strong> it.</p>`,47)]))}const p=n(r,[["render",t]]),d=JSON.parse('{"path":"/posts/devops/2019-12-18-docker-manager-rancher.html","title":"Docker-05-Rancher","lang":"zh-CN","frontmatter":{"title":"Docker-05-Rancher","date":"2019-12-18T00:00:00.000Z","categories":["Devops"],"tags":["docker","devops","sh"],"published":true,"description":"Rancher Rancher is an open source software platform that enables organizations to run containers in production. With Rancher, organizations no longer have to build a container s...","head":[["meta",{"property":"og:url","content":"https://houbb.github.io/blog-backend/posts/devops/2019-12-18-docker-manager-rancher.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"Docker-05-Rancher"}],["meta",{"property":"og:description","content":"Rancher Rancher is an open source software platform that enables organizations to run containers in production. With Rancher, organizations no longer have to build a container s..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/houbb/resource/master/img/rancher/2016-10-26-rancher-index.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-22T03:45:14.000Z"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:published_time","content":"2019-12-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-22T03:45:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker-05-Rancher\\",\\"image\\":[\\"https://raw.githubusercontent.com/houbb/resource/master/img/rancher/2016-10-26-rancher-index.png\\",\\"https://raw.githubusercontent.com/houbb/resource/master/img/rancher/2016-10-26-rancher-add-hosts.png\\",\\"https://raw.githubusercontent.com/houbb/resource/master/img/rancher/2016-10-27-rancher-first-host.png\\"],\\"datePublished\\":\\"2019-12-18T00:00:00.000Z\\",\\"dateModified\\":\\"2025-08-22T03:45:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"]]},"git":{"createdTime":1755834314000,"updatedTime":1755834314000,"contributors":[{"name":"binbin.hou","username":"","email":"binbin.hou@huifu.com","commits":1}]},"readingTime":{"minutes":2.51,"words":752},"filePathRelative":"posts/devops/2019-12-18-docker-manager-rancher.md","localizedDate":"2019年12月18日","excerpt":"\\n<p><a href=\\"http://rancher.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Rancher</a> is an open source software platform that enables organizations to run containers in production.<br>\\nWith Rancher, organizations no longer have to build a container services platform from scratch using a distinct set of open source technologies.<br>\\nRancher supplies the entire software stack needed to manage containers in production.</p>","autoDesc":true}');export{p as comp,d as data};
